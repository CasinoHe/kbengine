message(STATUS "Start compile thirdparty dependeny: apr")

ExternalProject_Add(apr
  PREFIX ${DEPENDENCIES_BUILD_DIR}/apr
  SOURCE_DIR ${DEPENDENCIES_DIR}/apr
  UPDATE_COMMAND ""
  PATCH_COMMAND ""
  CONFIGURE_COMMAND git clean -df COMMAND ./buildconf COMMAND ./configure --prefix=${DEPENDENCIES_INSTALL_DIR}
  BUILD_COMMAND make clean COMMAND make
  BUILD_IN_SOURCE 1
  INSTALL_COMMAND make install
  TEST_COMMAND ""
)

set(APR_FOUND TRUE)
set(APR_INCLUDE_DIRS ${DEPENDENCIES_INSTALL_DIR}/include)
set(APR_LIBRARY_DIRS ${DEPENDENCIES_INSTALL_DIR}/lib})
set(APR_LIBRARIES ${DEPENDENCIES_INSTALL_DIR}/lib/${CMAKE_SHARED_LIBRARY_PREFIX}apr-1${CMAKE_SHARED_LIBRARY_SUFFIX})